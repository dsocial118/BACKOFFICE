{% extends "includes/main.html" %} {% load static %} {% block head %}
<link
  rel="stylesheet"
  href="{% static 'custom/css/ciudadano-detail-enhanced.css' %}"
/>
<style>
  /* Sistema de CSS Variables para Programas de Intervención */
  :root {
    --gov-primary: #143570;
    --gov-accent: #17a2b8;
    --gov-danger: #dc3545;
    --success: #28a745;
    --warning: #ffc107;
    --info: #17a2b8;
    --secondary: #6c757d;
  }

  /* Card de programas mejorada */
  .programa-card {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 12px;
    margin-bottom: 1.5rem;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
  }

  .programa-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    border-color: rgba(23, 162, 184, 0.3);
  }

  .programa-card .card-header {
    background: linear-gradient(
      135deg,
      rgba(20, 53, 112, 0.8),
      rgba(23, 162, 184, 0.3)
    );
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 12px 12px 0 0;
    padding: 1rem 1.5rem;
  }

  .programa-card .card-title {
    color: white;
    font-weight: 600;
    margin-bottom: 0;
    font-size: 1.1rem;
  }

  .programa-card .card-body {
    padding: 1.5rem;
    color: rgba(255, 255, 255, 0.9);
  }

  /* Badges de estado mejorados */
  .estado-badge {
    padding: 0.5rem 1rem;
    border-radius: 8px;
    font-weight: 600;
    font-size: 0.875rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
  }

  .estado-activo {
    background: linear-gradient(135deg, var(--success), #20c997);
    color: white;
  }

  .estado-inactivo {
    background: linear-gradient(135deg, var(--gov-danger), #e74c3c);
    color: white;
  }

  /* Info boxes mejoradas */
  .info-box-enhanced {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 12px;
    padding: 1.5rem;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
  }

  .info-box-enhanced:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
  }

  .info-box-enhanced .info-icon {
    width: 60px;
    height: 60px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    color: white;
    margin-bottom: 1rem;
  }

  .info-icon-success {
    background: linear-gradient(135deg, var(--success), #20c997);
  }

  .info-icon-danger {
    background: linear-gradient(135deg, var(--gov-danger), #e74c3c);
  }

  .info-box-enhanced .info-text {
    color: rgba(255, 255, 255, 0.7);
    font-size: 0.875rem;
    margin-bottom: 0.5rem;
  }

  .info-box-enhanced .info-number {
    color: white;
    font-size: 2rem;
    font-weight: 700;
    margin: 0;
  }

  /* Información del programa */
  .programa-info {
    margin-bottom: 1rem;
  }

  .programa-info .fecha {
    color: rgba(255, 255, 255, 0.6);
    font-size: 0.875rem;
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .programa-detail {
    margin-bottom: 0.75rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .programa-detail .label {
    color: white;
    font-weight: 600;
    min-width: 150px;
  }

  .programa-detail .value {
    color: rgba(255, 255, 255, 0.8);
  }

  .programa-badge {
    padding: 0.25rem 0.75rem;
    border-radius: 6px;
    font-size: 0.75rem;
    font-weight: 500;
  }

  .badge-equipo {
    background: linear-gradient(135deg, var(--success), #20c997);
    color: white;
  }

  .badge-responsable {
    background: linear-gradient(135deg, var(--info), #0dcaf0);
    color: white;
  }

  /* Animaciones de entrada */
  .fade-in-up {
    animation: fadeInUp 0.6s ease-out forwards;
  }

  .fade-in-left {
    animation: fadeInLeft 0.6s ease-out forwards;
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fadeInLeft {
    from {
      opacity: 0;
      transform: translateX(-30px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  /* Animaciones escalonadas */
  .programa-card:nth-child(1) {
    animation-delay: 0.1s;
  }
  .programa-card:nth-child(2) {
    animation-delay: 0.2s;
  }
  .programa-card:nth-child(3) {
    animation-delay: 0.3s;
  }
  .programa-card:nth-child(4) {
    animation-delay: 0.4s;
  }
  .programa-card:nth-child(5) {
    animation-delay: 0.5s;
  }
  .programa-card:nth-child(6) {
    animation-delay: 0.6s;
  }

  /* Responsividad */
  @media (max-width: 768px) {
    .programa-card .card-header {
      padding: 1rem;
    }

    .programa-card .card-body {
      padding: 1rem;
    }

    .programa-detail {
      flex-direction: column;
      align-items: flex-start;
      gap: 0.25rem;
    }

    .programa-detail .label {
      min-width: auto;
    }
  }
</style>
{% endblock %} {% block title %}Programas en intervención - {{ ciudadano.nombre
}} {{ ciudadano.apellido }}{% endblock %} {% block titulo-pagina %}Ciudadano{%
endblock %} {% block breadcrumb %}
<ol class="breadcrumb float-sm-right mt-2 mr-2">
  <li class="breadcrumb-item">
    <a href="{% url 'ciudadanos' %}">Ciudadano</a>
  </li>
  <li class="breadcrumb-item">
    <a href="{% url 'ciudadanos_ver' ciudadano.id %}"
      >{{ ciudadano.apellido }}, {{ ciudadano.nombre }}</a
    >
  </li>
  <li class="breadcrumb-item active">Programas en intervención</li>
</ol>
{% endblock %} {% block menu-adicional %}{% endblock %} {% block content %}
<div class="row">
  <div class="col-md-12">
    <div class="card shadow-lg">
      <div class="card-body p-4">
        <!-- Resumen del ciudadano y estadísticas -->
        <div class="row mb-4 fade-in-up">
          <div class="col-md-4">
            {% include "components/ciudadanos/ciudadano_summary_card.html" with
            ciudadano=ciudadano card_class="mb-0" %}
          </div>
          <div class="col-md-8">
            <div class="card shadow-sm h-100">
              <div class="card-header">
                <h5 class="mb-0">
                  <i class="fas fa-chart-pie me-2"></i>Estado de Programas
                </h5>
              </div>
              <div class="card-body">
                <div class="row">
                  <div class="col-md-6">
                    <div class="info-box-enhanced text-center">
                      <div class="info-icon info-icon-success mx-auto">
                        <i class="far fa-thumbs-up"></i>
                      </div>
                      <div class="info-text">Programas Activos</div>
                      <div class="info-number">1</div>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="info-box-enhanced text-center">
                      <div class="info-icon info-icon-danger mx-auto">
                        <i class="far fa-thumbs-down"></i>
                      </div>
                      <div class="info-text">Programas Inactivos</div>
                      <div class="info-number">5</div>
                    </div>
                  </div>
                </div>

                <div
                  class="alert alert-info border-0 mt-3"
                  style="background: rgba(23, 162, 184, 0.1)"
                >
                  <i class="fas fa-info-circle me-2"></i>
                  <strong>Resumen:</strong> Se muestran todos los programas de
                  intervención asociados al ciudadano.
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Lista de Programas -->
        <div class="row fade-in-left">
          <div class="col-12">
            <h6 class="text-white mb-4">
              <i class="fas fa-clipboard-list me-2"></i>Programas de
              Intervención
            </h6>

            <!-- DDA - Programa Activo -->
            <div class="programa-card fade-in-up">
              <div
                class="card-header d-flex justify-content-between align-items-center"
              >
                <h3 class="card-title"><i class="fas fa-heart me-2"></i>DDA</h3>
                <span class="estado-badge estado-activo">
                  <i class="fas fa-check-circle me-1"></i>Activo
                </span>
              </div>
              <div class="card-body">
                <div class="programa-info">
                  <div class="fecha">
                    <i class="fas fa-calendar-alt me-2"></i>
                    Admitido desde 14/07/2019
                  </div>

                  <div class="programa-detail">
                    <span class="label">
                      <i class="fas fa-users me-2"></i>Equipo interviniente:
                    </span>
                    <span class="programa-badge badge-equipo">Sin asignar</span>
                  </div>

                  <div class="programa-detail">
                    <span class="label">
                      <i class="fas fa-user-tie me-2"></i>Persona responsable:
                    </span>
                    <span class="programa-badge badge-responsable"
                      >Sin asignar</span
                    >
                  </div>

                  <div class="programa-detail">
                    <span class="label">
                      <i class="fas fa-clipboard me-2"></i>Observaciones:
                    </span>
                    <span class="value">Sin observaciones registradas</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Asistencia alimentaria - Programa Inactivo -->
            <div class="programa-card fade-in-up">
              <div
                class="card-header d-flex justify-content-between align-items-center"
              >
                <h3 class="card-title">
                  <i class="fas fa-utensils me-2"></i>Asistencia alimentaria
                </h3>
                <span class="estado-badge estado-inactivo">
                  <i class="fas fa-times-circle me-1"></i>Inactivo
                </span>
              </div>
              <div class="card-body">
                <div class="programa-info">
                  <div class="fecha">
                    <i class="fas fa-calendar-alt me-2"></i>
                    Admitido desde 14/07/2020
                  </div>

                  <div class="programa-detail">
                    <span class="label">
                      <i class="fas fa-users me-2"></i>Equipo interviniente:
                    </span>
                    <span class="programa-badge badge-equipo">Sin asignar</span>
                  </div>

                  <div class="programa-detail">
                    <span class="label">
                      <i class="fas fa-user-tie me-2"></i>Persona responsable:
                    </span>
                    <span class="programa-badge badge-responsable"
                      >Sin asignar</span
                    >
                  </div>

                  <div class="programa-detail">
                    <span class="label">
                      <i class="fas fa-clipboard me-2"></i>Observaciones:
                    </span>
                    <span class="value">Sin observaciones registradas</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Incendios - Programa Inactivo -->
            <div class="programa-card fade-in-up">
              <div
                class="card-header d-flex justify-content-between align-items-center"
              >
                <h3 class="card-title">
                  <i class="fas fa-fire me-2"></i>Incendios
                </h3>
                <span class="estado-badge estado-inactivo">
                  <i class="fas fa-times-circle me-1"></i>Inactivo
                </span>
              </div>
              <div class="card-body">
                <div class="programa-info">
                  <div class="fecha">
                    <i class="fas fa-calendar-alt me-2"></i>
                    Admitido desde 09/07/2019
                  </div>

                  <div class="programa-detail">
                    <span class="label">
                      <i class="fas fa-users me-2"></i>Equipo interviniente:
                    </span>
                    <span class="programa-badge badge-equipo">Sin asignar</span>
                  </div>

                  <div class="programa-detail">
                    <span class="label">
                      <i class="fas fa-user-tie me-2"></i>Persona responsable:
                    </span>
                    <span class="programa-badge badge-responsable"
                      >Sin asignar</span
                    >
                  </div>

                  <div class="programa-detail">
                    <span class="label">
                      <i class="fas fa-clipboard me-2"></i>Observaciones:
                    </span>
                    <span class="value">Sin observaciones registradas</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Asistencia habitacional - Programa Inactivo -->
            <div class="programa-card fade-in-up">
              <div
                class="card-header d-flex justify-content-between align-items-center"
              >
                <h3 class="card-title">
                  <i class="fas fa-home me-2"></i>Asistencia habitacional
                </h3>
                <span class="estado-badge estado-inactivo">
                  <i class="fas fa-times-circle me-1"></i>Inactivo
                </span>
              </div>
              <div class="card-body">
                <div class="programa-info">
                  <div class="fecha">
                    <i class="fas fa-calendar-alt me-2"></i>
                    Admitido desde 09/07/2019
                  </div>

                  <div class="programa-detail">
                    <span class="label">
                      <i class="fas fa-users me-2"></i>Equipo interviniente:
                    </span>
                    <span class="programa-badge badge-equipo">Sin asignar</span>
                  </div>

                  <div class="programa-detail">
                    <span class="label">
                      <i class="fas fa-user-tie me-2"></i>Persona responsable:
                    </span>
                    <span class="programa-badge badge-responsable"
                      >Sin asignar</span
                    >
                  </div>

                  <div class="programa-detail">
                    <span class="label">
                      <i class="fas fa-clipboard me-2"></i>Observaciones:
                    </span>
                    <span class="value">Sin observaciones registradas</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Camino de la embarazada - Programa Inactivo -->
            <div class="programa-card fade-in-up">
              <div
                class="card-header d-flex justify-content-between align-items-center"
              >
                <h3 class="card-title">
                  <i class="fas fa-baby me-2"></i>Camino de la embarazada
                </h3>
                <span class="estado-badge estado-inactivo">
                  <i class="fas fa-times-circle me-1"></i>Inactivo
                </span>
              </div>
              <div class="card-body">
                <div class="programa-info">
                  <div class="fecha">
                    <i class="fas fa-calendar-alt me-2"></i>
                    Admitido desde 10/07/2021
                  </div>

                  <div class="programa-detail">
                    <span class="label">
                      <i class="fas fa-users me-2"></i>Equipo interviniente:
                    </span>
                    <span class="programa-badge badge-equipo">Sin asignar</span>
                  </div>

                  <div class="programa-detail">
                    <span class="label">
                      <i class="fas fa-user-tie me-2"></i>Persona responsable:
                    </span>
                    <span class="programa-badge badge-responsable"
                      >Sin asignar</span
                    >
                  </div>

                  <div class="programa-detail">
                    <span class="label">
                      <i class="fas fa-clipboard me-2"></i>Observaciones:
                    </span>
                    <span class="value">Sin observaciones registradas</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Mil días - Programa Inactivo -->
            <div class="programa-card fade-in-up">
              <div
                class="card-header d-flex justify-content-between align-items-center"
              >
                <h3 class="card-title">
                  <i class="fas fa-heart-broken me-2"></i>Mil días
                </h3>
                <span class="estado-badge estado-inactivo">
                  <i class="fas fa-times-circle me-1"></i>Inactivo
                </span>
              </div>
              <div class="card-body">
                <div class="programa-info">
                  <div class="fecha">
                    <i class="fas fa-calendar-alt me-2"></i>
                    Admitido desde 04/02/2021
                  </div>

                  <div class="programa-detail">
                    <span class="label">
                      <i class="fas fa-users me-2"></i>Equipo interviniente:
                    </span>
                    <span class="programa-badge badge-equipo">Sin asignar</span>
                  </div>

                  <div class="programa-detail">
                    <span class="label">
                      <i class="fas fa-user-tie me-2"></i>Persona responsable:
                    </span>
                    <span class="programa-badge badge-responsable"
                      >Sin asignar</span
                    >
                  </div>

                  <div class="programa-detail">
                    <span class="label">
                      <i class="fas fa-clipboard me-2"></i>Observaciones:
                    </span>
                    <span class="value">Sin observaciones registradas</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Botón de volver -->
        <div class="row mt-4 fade-in-up">
          <div class="col-12">
            <div class="d-flex justify-content-start">
              <a
                href="{% url 'ciudadanos_ver' ciudadano.id %}"
                class="btn btn-secondary"
              >
                <i class="fas fa-arrow-left me-2"></i>Volver al Ciudadano
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %} {% block customJS %}
<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Configurar breadcrumb dinámicamente si no está disponible como contexto
    if (typeof breadcrumb_items === "undefined") {
      // Crear estructura de breadcrumb si no está disponible
      const breadcrumbContainer = document.querySelector(".breadcrumb");
      if (breadcrumbContainer) {
        breadcrumbContainer.innerHTML = `
                    <li class="breadcrumb-item">
                        <a href="{% url 'ciudadanos' %}">Ciudadano</a>
                    </li>
                    <li class="breadcrumb-item">
                        <a href="{% url 'ciudadanos_ver' ciudadano.id %}">{{ ciudadano.apellido }}, {{ ciudadano.nombre }}</a>
                    </li>
                    <li class="breadcrumb-item active">Programas en intervención</li>
                `;
      }
    }

    // Aplicar animaciones de entrada escalonadas
    const programaCards = document.querySelectorAll(".programa-card");
    programaCards.forEach((card, index) => {
      card.style.opacity = "0";
      card.style.transform = "translateY(30px)";

      setTimeout(() => {
        card.style.transition = "all 0.6s ease-out";
        card.style.opacity = "1";
        card.style.transform = "translateY(0)";
      }, index * 150); // Retraso escalonado de 150ms
    });

    // Efectos hover mejorados para las tarjetas de programas
    programaCards.forEach((card) => {
      card.addEventListener("mouseenter", function () {
        this.style.transform = "translateY(-8px)";
        this.style.boxShadow = "0 15px 35px rgba(0, 0, 0, 0.4)";
      });

      card.addEventListener("mouseleave", function () {
        this.style.transform = "translateY(-5px)";
        this.style.boxShadow = "0 10px 30px rgba(0, 0, 0, 0.3)";
      });
    });

    // Animación para las info boxes de estadísticas
    const infoBoxes = document.querySelectorAll(".info-box-enhanced");
    infoBoxes.forEach((box, index) => {
      box.style.opacity = "0";
      box.style.transform = "scale(0.9)";

      setTimeout(() => {
        box.style.transition = "all 0.5s ease-out";
        box.style.opacity = "1";
        box.style.transform = "scale(1)";
      }, (index + 1) * 200);
    });

    // Efectos de click en badges de estado
    const estadoBadges = document.querySelectorAll(".estado-badge");
    estadoBadges.forEach((badge) => {
      badge.addEventListener("click", function () {
        this.style.transform = "scale(0.95)";
        setTimeout(() => {
          this.style.transform = "scale(1)";
        }, 100);
      });
    });

    // Tooltip mejorado para badges de programa
    const programaBadges = document.querySelectorAll(".programa-badge");
    programaBadges.forEach((badge) => {
      if (badge.textContent.trim() === "Sin asignar") {
        badge.setAttribute(
          "title",
          "Este programa no tiene asignado un equipo o responsable específico"
        );
        badge.style.opacity = "0.7";
      }
    });

    // Contador animado para los números de estadísticas
    const counters = document.querySelectorAll(".info-number");
    counters.forEach((counter) => {
      const target = parseInt(counter.textContent);
      let current = 0;
      const increment = target / 30; // 30 frames de animación

      const updateCounter = () => {
        if (current < target) {
          current += increment;
          counter.textContent = Math.floor(current);
          requestAnimationFrame(updateCounter);
        } else {
          counter.textContent = target;
        }
      };

      // Iniciar animación después de un retraso
      setTimeout(() => {
        updateCounter();
      }, 1000);
    });

    // Efecto de pulso para programas activos
    const programasActivos = document.querySelectorAll(".estado-activo");
    programasActivos.forEach((badge) => {
      setInterval(() => {
        badge.style.transform = "scale(1.05)";
        setTimeout(() => {
          badge.style.transform = "scale(1)";
        }, 200);
      }, 3000); // Pulso cada 3 segundos
    });

    // Scroll suave al hacer click en enlaces internos
    const internalLinks = document.querySelectorAll('a[href^="#"]');
    internalLinks.forEach((link) => {
      link.addEventListener("click", function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute("href"));
        if (target) {
          target.scrollIntoView({
            behavior: "smooth",
            block: "start",
          });
        }
      });
    });

    // Función para mostrar notificaciones (reutilizable)
    window.showNotification = function (message, type = "info") {
      const alertClass =
        type === "success"
          ? "alert-success"
          : type === "error"
          ? "alert-danger"
          : type === "warning"
          ? "alert-warning"
          : "alert-info";

      const iconClass =
        type === "success"
          ? "fas fa-check-circle"
          : type === "error"
          ? "fas fa-exclamation-triangle"
          : type === "warning"
          ? "fas fa-exclamation-circle"
          : "fas fa-info-circle";

      const notification = document.createElement("div");
      notification.className = `alert ${alertClass} alert-dismissible fade show position-fixed`;
      notification.style.cssText =
        "top: 20px; right: 20px; z-index: 10000; min-width: 350px; backdrop-filter: blur(10px);";
      notification.innerHTML = `
                <i class="${iconClass} me-2"></i>${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;

      document.body.appendChild(notification);

      // Auto-remover después de 5 segundos
      setTimeout(() => {
        if (notification.parentNode) {
          notification.remove();
        }
      }, 5000);
    };

    // Efecto de carga completa
    setTimeout(() => {
      const mainCard = document.querySelector(".card.shadow-lg");
      if (mainCard) {
        mainCard.style.opacity = "0";
        mainCard.style.transform = "translateY(20px)";
        mainCard.style.transition = "all 0.8s ease-out";

        setTimeout(() => {
          mainCard.style.opacity = "1";
          mainCard.style.transform = "translateY(0)";
        }, 100);
      }
    }, 100);
  });
</script>
{% endblock %}
