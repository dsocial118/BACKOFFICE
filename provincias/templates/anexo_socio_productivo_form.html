{% extends "includes/base.html" %}
{% load static crispy_forms_tags %}
{% block title %}Anexo Socio Productivo{% endblock %}
{% block titulo-pagina %}Anexo Socio Productivo{% endblock %}
{% block breadcrumb %}
    <ol class="breadcrumb float-sm-right px-3">
        <li class="breadcrumb-item">
            <a href="{% url 'proyecto_list' %}">Proyectos</a>
        </li>
        <li class="breadcrumb-item active">Agregar Anexo Socio Productivo</li>
    </ol>
{% endblock %}
{% block content %}
    <div class="row">
        <div class="col-12">
            <div class="card card-primary card-outline">
                <div class="bs-stepper">
                    <div class="card-header mb-3">
                        <h3 class="card-title">Agregar Anexo Socio Productivo</h3>
                    </div>
                    <div class="card-body">
                        <div class="form-row justify-content-center">
                            <div class="bs-stepper-header" role="tablist">
                                <div class="step active">
                                    <button type="button" class="step-trigger" role="tab">
                                        <span class="bs-stepper-circle">1</span>
                                        <span class="bs-stepper-label">Personeria</span>
                                    </button>
                                </div>
                                <div class="line"></div>
                                <div class="step">
                                    <button type="button" class="step-trigger" role="tab">
                                        <span class="bs-stepper-circle">2</span>
                                        <span class="bs-stepper-label">Datos del proyecto</span>
                                    </button>
                                </div>
                                <div class="line"></div>
                                <div class="step">
                                    <button type="button" class="step-trigger" role="tab">
                                        <span class="bs-stepper-circle">3</span>
                                        <span class="bs-stepper-label">Lineas de accion y presupuesto</span>
                                    </button>
                                </div>
                                <div class="line"></div>
                                <div class="step">
                                    <button type="button" class="step-trigger" role="tab">
                                        <span class="bs-stepper-circle">4</span>
                                        <span class="bs-stepper-label">Documentacion obligatoria</span>
                                    </button>
                                </div>
                            </div>
                            <form method="post" enctype="multipart/form-data" class="w-100">
                                {% csrf_token %}
                                <div id="step_1" class="step-content">
                                    {{ form.tipo_persona|as_crispy_field }}
                                    <div class="juridica-field" style="display: none;">
                                        <div class="form-group row">
                                            <div class="col-6">{{ juridica_form.nombre|as_crispy_field }}</div>
                                            <div class="col-6">{{ juridica_form.tipo|as_crispy_field }}</div>
                                        </div>
                                        <div class="form-group row">
                                            <div class="col-6">{{ juridica_form.fecha_creacion|as_crispy_field }}</div>
                                            <div class="col-6">{{ juridica_form.numero_personeria_juridica|as_crispy_field }}</div>
                                        </div>
                                        <div class="form-group row">
                                            <div class="col-6">{{ juridica_form.fecha_otorgamiento|as_crispy_field }}</div>
                                            <div class="col-6">{{ juridica_form.cuit|as_crispy_field }}</div>
                                        </div>
                                        <div class="form-group row">
                                            <div class="col-12">{{ juridica_form.domicilio_legal|as_crispy_field }}</div>
                                        </div>
                                        <div class="form-group row">
                                            <div class="col-4">{{ juridica_form.autoridad_nombre_completo|as_crispy_field }}</div>
                                            <div class="col-4">{{ juridica_form.autoridad_dni|as_crispy_field }}</div>
                                            <div class="col-4">{{ juridica_form.autoridad_cuit|as_crispy_field }}</div>
                                        </div>
                                        <div class="form-group row">
                                            <div class="col-12">{{ juridica_form.autoridad_rol|as_crispy_field }}</div>
                                        </div>
                                    </div>
                                    <div class="humana-field" style="display: none;">
                                        <div class="form-group row">
                                            <div class="col-6">{{ fisica_form.nombre_completo|as_crispy_field }}</div>
                                        </div>
                                        <div class="form-group row">
                                            <div class="col-6">{{ fisica_form.dni|as_crispy_field }}</div>
                                            <div class="col-6">{{ fisica_form.fecha_nacimiento|as_crispy_field }}</div>
                                        </div>
                                        <div class="form-group row">
                                            <div class="col-6">{{ fisica_form.cuil|as_crispy_field }}</div>
                                            <div class="col-6">{{ fisica_form.domicilio_real|as_crispy_field }}</div>
                                        </div>
                                        <div class="form-group row">
                                            <div class="col-6">{{ fisica_form.mail|as_crispy_field }}</div>
                                            <div class="col-6">{{ fisica_form.telefono|as_crispy_field }}</div>
                                        </div>
                                    </div>
                                </div>
                                <div id="step_2" class="step-content" style="display: none;">
                                    <div class="juridica-field" style="display: none;">
                                        <div class="form-group row">
                                            <div class="col-6">{{ juridica_form.proyecto_nombre|as_crispy_field }}</div>
                                            <div class="col-6">{{ juridica_form.proyecto_tipo_actividad|as_crispy_field }}</div>
                                        </div>
                                        <div class="form-group row">
                                            <div class="col-6">{{ juridica_form.proyecto_rubro|as_crispy_field }}</div>
                                            <div class="col-6">{{ juridica_form.proyecto_objetivo|as_crispy_field }}</div>
                                        </div>
                                        <div class="form-group row">
                                            <div class="col-6">{{ juridica_form.proyecto_costo|as_crispy_field }}</div>
                                            <div class="col-6">{{ juridica_form.proyecto_pertenece_comunidad_indigena|as_crispy_field }}</div>
                                        </div>
                                        <div class="form-group row">
                                            <div class="col-6">{{ juridica_form.proyecto_comunidad_indigena|as_crispy_field }}</div>
                                            <div class="col-6">{{ juridica_form.proyecto_practicas_regenerativas|as_crispy_field }}</div>
                                        </div>
                                    </div>
                                    <div class="humana-field" style="display: none;">
                                        <div class="form-group row">
                                            <div class="col-6">{{ fisica_form.proyecto_nombre|as_crispy_field }}</div>
                                            <div class="col-6">{{ fisica_form.proyecto_tipo_actividad|as_crispy_field }}</div>
                                        </div>
                                        <div class="form-group row">
                                            <div class="col-6">{{ fisica_form.proyecto_rubro|as_crispy_field }}</div>
                                            <div class="col-6">{{ fisica_form.proyecto_objetivo|as_crispy_field }}</div>
                                        </div>
                                        <div class="form-group row">
                                            <div class="col-6">{{ fisica_form.proyecto_costo|as_crispy_field }}</div>
                                            <div class="col-6">{{ fisica_form.proyecto_pertenece_comunidad_indigena|as_crispy_field }}</div>
                                        </div>
                                        <div class="form-group row">
                                            <div class="col-6">{{ fisica_form.proyecto_comunidad_indigena|as_crispy_field }}</div>
                                            <div class="col-6">{{ fisica_form.proyecto_practicas_regenerativas|as_crispy_field }}</div>
                                        </div>
                                    </div>
                                </div>
                                <div id="step_3" class="step-content" style="display: none;">
                                    <div class="form-group row">
                                        <div class="col-6">{{ linea_de_accion_form.produccion_apoyo_tecnico|as_crispy_field }}</div>
                                        <div class="col-6">{{ linea_de_accion_form.produccion_maquinaria|as_crispy_field }}</div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-6">{{ linea_de_accion_form.produccion_tecnologias|as_crispy_field }}</div>
                                        <div class="col-6">{{ linea_de_accion_form.produccion_entrega|as_crispy_field }}</div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-6">{{ linea_de_accion_form.comercializacion_fortalecimiento_institucional|as_crispy_field }}</div>
                                        <div class="col-6">{{ linea_de_accion_form.comercializacion_apoyo_tecnologico|as_crispy_field }}</div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-6">{{ linea_de_accion_form.comercializacion_habilidades_blandas|as_crispy_field }}</div>
                                        <div class="col-6">{{ linea_de_accion_form.comercializacion_fortalecimiento_unidades|as_crispy_field }}</div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-6">{{ linea_de_accion_form.circular_fortalecimiento|as_crispy_field }}</div>
                                        <div class="col-6">{{ linea_de_accion_form.circular_practicas_sostenibles|as_crispy_field }}</div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-6">{{ linea_de_accion_form.circular_materiales_reciclados|as_crispy_field }}</div>
                                        <div class="col-6">{{ linea_de_accion_form.circular_reduccion_residuos|as_crispy_field }}</div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-12">{{ linea_de_accion_form.fundamentacion|as_crispy_field }}</div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-6">{{ linea_de_accion_form.destinatarios_directos|as_crispy_field }}</div>
                                        <div class="col-6">{{ linea_de_accion_form.destinatarios_indirectos|as_crispy_field }}</div>
                                    </div>
                                    <table class="table table-bordered table-striped projects">
                                        <thead>
                                            <tr>
                                                <th>TIPO DE ACTIVIDAD PRODUCTIVA</th>
                                                <th>TIPO DE BIENES/SERVICIOS</th>
                                                <th>NOMBRE DEL PRODUCTO O SERVICIO</th>
                                                <th>CANTIDAD A ADQUIRIR</th>
                                                <th>COSTO UNITARIO TOTAL</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr id="presupuestos"></tr>
                                        </tbody>
                                    </table>
                                    <button type="button"
                                            class="btn btn-primary"
                                            data-toggle="modal"
                                            data-target="#formModal">Abrir Modal</button>
                                    <div class="modal fade"
                                         id="formModal"
                                         tabindex="-1"
                                         role="dialog"
                                         aria-labelledby="formModalLabel"
                                         aria-hidden="true">
                                        <div class="modal-dialog" role="document">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title" id="formModalLabel">Agregar Stock</h5>
                                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                        <span aria-hidden="true">&times;</span>
                                                    </button>
                                                </div>
                                                <div class="modal-body">
                                                    <!-- Formulario -->
                                                    <form id="modalForm">
                                                        <div class="form-group">
                                                            <label for="tipo_actividad">TIPO DE ACTIVIDAD PRODUCTIVA</label>
                                                            <select name="tipo_actividad" class="form-control" id="tipo_actividad" required>
                                                                <option selected></option>
                                                                <option value="1"> Apoyo técnico para mejorar competitividad </option>
                                                                <option value="2"> Acceso a máquinas, herramientas e insumos</option>
                                                            </select>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="bienes">TIPO DE BIENES/SERVICIO</label>
                                                            <select name="bienes" class="form-control" id="bienes" required>
                                                                <option selected></option>
                                                                <option value="1">Asistencia técnica específica a través de RRHH</option>
                                                                <option value="2">maquinas</option>
                                                            </select>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="nombre">NOMBRE DEL PRODUCTO O SERVICIO</label>
                                                            <input type="text" class="form-control" id="nombre" name="nombre" required >
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="cantidad">CANTIDAD A ADQUIRIR</label>
                                                            <input type="text" class="form-control" id="cantidad" name="cantidad" required>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="costo">COSTO UNITARIO TOTAL</label>
                                                            <input type="text" class="form-control" id="costo" name="costo" required>
                                                        </div>
                                                    </form>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                                                    <button type="button" class="btn btn-primary" id="submitForm">Enviar</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="step_4" class="step-content" style="display: none;">TEPUSE</div>
                            <button id="continueButton" class="btn btn-primary mx-1" type="button">Continuar</button>
                            <a href="{% url 'proyecto_list' %}" class="btn btn-secondary">Cancelar</a>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block customJS %}
    <script src="{% static 'custom/js/anexo_form.js' %}"></script>
{% endblock %}
