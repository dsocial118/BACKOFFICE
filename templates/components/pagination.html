{# Componente Pagination #}
{# Uso: {% include 'components/pagination.html' with is_paginated=is_paginated page_obj=page_obj page_range=page_range query=query prev_text='Anterior' next_text='Siguiente' %} #}
{% if is_paginated %}
    <div class="mt-2">
        <ul class="pagination">
            <!-- Botón Anterior -->
            {% if page_obj.has_previous %}
                <li class="page-item">
                    <a href="?{% if query %}busqueda={{ query }}&{% endif %}{% for key, value in request.GET.items %}{% if key != 'page' and key != 'busqueda' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page={{ page_obj.previous_page_number }}"
                       class="page-link">{{ prev_text|default:"Volver" }}</a>
                </li>
            {% else %}
                <li class="page-item disabled">
                    <a href="#" class="page-link">{{ prev_text|default:"Volver" }}</a>
                </li>
            {% endif %}
            <!-- Páginas -->
            {% if page_range %}
                {% for i in page_range %}
                    {% if i == '…' %}
                        <li class="page-item disabled">
                            <a href="#" class="page-link">…</a>
                        </li>
                    {% else %}
                        <li class="page-item {% if page_obj.number == i %}active{% endif %}">
                            <a href="?{% if query %}busqueda={{ query }}&{% endif %}{% for key, value in request.GET.items %}{% if key != 'page' and key != 'busqueda' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page={{ i }}"
                               class="page-link">{{ i }}</a>
                        </li>
                    {% endif %}
                {% endfor %}
            {% else %}
                {% for i in page_obj.paginator.page_range %}
                    {% if page_obj.number == i %}
                        <li class="page-item active">
                            <a href="?{% if query %}busqueda={{ query }}&{% endif %}{% for key, value in request.GET.items %}{% if key != 'page' and key != 'busqueda' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page={{ i }}"
                               class="page-link">{{ i }}</a>
                        </li>
                    {% elif i > page_obj.number|add:'-5' and i < page_obj.number|add:'5' %}
                        <li class="page-item">
                            <a href="?{% if query %}busqueda={{ query }}&{% endif %}{% for key, value in request.GET.items %}{% if key != 'page' and key != 'busqueda' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page={{ i }}"
                               class="page-link">{{ i }}</a>
                        </li>
                    {% elif i == 1 or i == page_obj.paginator.num_pages %}
                        <li class="page-item">
                            <a href="?{% if query %}busqueda={{ query }}&{% endif %}{% for key, value in request.GET.items %}{% if key != 'page' and key != 'busqueda' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page={{ i }}"
                               class="page-link">{{ i }}</a>
                        </li>
                    {% elif i == page_obj.number|add:'-6' or i == page_obj.number|add:'6' %}
                        <li class="page-item disabled">
                            <a href="#" class="page-link">...</a>
                        </li>
                    {% endif %}
                {% endfor %}
            {% endif %}
            <!-- Botón Siguiente -->
            {% if page_obj.has_next %}
                <li class="page-item">
                    <a href="?{% if query %}busqueda={{ query }}&{% endif %}{% for key, value in request.GET.items %}{% if key != 'page' and key != 'busqueda' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page={{ page_obj.next_page_number }}"
                       class="page-link">{{ next_text|default:"Continuar" }}</a>
                </li>
            {% else %}
                <li class="page-item disabled">
                    <a href="#" class="page-link">{{ next_text|default:"Continuar" }}</a>
                </li>
            {% endif %}
        </ul>
    </div>
{% endif %}
