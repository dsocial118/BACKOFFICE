{# Componente Tabs #}
{# Uso: {% include 'components/tabs.html' with tabs=tab_items active_tab='tab1' tab_content=tab_contents %} #}

<div class="tabs-container {{ container_class|default:'' }}">
    <!-- Nav tabs -->
    <ul class="nav nav-{% if style == 'pills' %}pills{% else %}tabs{% endif %} {% if nav_class %}{{ nav_class }}{% endif %}" 
        id="{{ tab_id|default:'myTab' }}" role="tablist">
        {% for tab in tabs %}
            <li class="nav-item" role="presentation">
                <button class="nav-link {% if tab.id == active_tab or forloop.first and not active_tab %}active{% endif %} {% if tab.class %}{{ tab.class }}{% endif %}" 
                        id="{{ tab.id }}-tab" 
                        data-bs-toggle="tab" 
                        data-bs-target="#{{ tab.id }}" 
                        type="button" 
                        role="tab" 
                        aria-controls="{{ tab.id }}" 
                        aria-selected="{% if tab.id == active_tab or forloop.first and not active_tab %}true{% else %}false{% endif %}">
                    {% if tab.icon %}<i class="{{ tab.icon }} me-1"></i>{% endif %}
                    {{ tab.title }}
                    {% if tab.badge %}
                        <span class="badge bg-{{ tab.badge.color|default:'secondary' }} ms-1">{{ tab.badge.text }}</span>
                    {% endif %}
                </button>
            </li>
        {% endfor %}
    </ul>

    <!-- Tab panes -->
    <div class="tab-content {% if content_class %}{{ content_class }}{% endif %}" 
         id="{{ tab_id|default:'myTab' }}Content">
        {% for tab in tabs %}
            <div class="tab-pane fade {% if tab.id == active_tab or forloop.first and not active_tab %}show active{% endif %} {% if tab.pane_class %}{{ tab.pane_class }}{% endif %}" 
                 id="{{ tab.id }}" 
                 role="tabpanel" 
                 aria-labelledby="{{ tab.id }}-tab">
                {% if tab.content %}
                    {{ tab.content|safe }}
                {% elif tab_content and tab_content|get_item:tab.id %}
                    {{ tab_content|get_item:tab.id|safe }}
                {% else %}
                    <div class="p-3">
                        <p class="text-muted">Contenido de {{ tab.title }}</p>
                    </div>
                {% endif %}
            </div>
        {% endfor %}
    </div>
</div>

{# CSS personalizado #}
<style>
    .tabs-container .nav-tabs .nav-link {
        border-bottom: 2px solid transparent;
    }
    .tabs-container .nav-tabs .nav-link.active {
        border-bottom-color: var(--bs-primary);
        color: var(--bs-primary);
    }
    .tabs-container .tab-content {
        border: 1px solid #dee2e6;
        border-top: none;
        border-radius: 0 0 0.375rem 0.375rem;
    }
</style>