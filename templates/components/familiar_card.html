{% load custom_filters static %}
<!-- Componente Tarjeta de Familiar -->
<!-- Uso: include 'components/familiar_card.html' with familiar=f ciudadano_field='ciudadano_2' vinculo_field='vinculo' -->
<div class="col-12 col-sm-6 col-md-4 d-flex align-items-stretch flex-column">
    <div class="card bg-solid d-flex flex-fill">
        <div class="card-header border-bottom-0">
            <h1 class="card-title">
                <b class="pr-2">{{ familiar|attr:ciudadano_field }} </b>| {{ familiar|attr:vinculo_field }}
            </h1>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-sm-7">
                    <dl class="row mb-0">
                        <dt class="col-lg-5 font-weight-normal">Dirección</dt>
                        <dd class="col-lg-7 font-weight-bold">
                            {{ familiar|attr:ciudadano_field|attr:'calle'|default_if_none:"-" }}
                            {{ familiar|attr:ciudadano_field|attr:'altura'|default_if_none:"" }}
                        </dd>
                        <dt class="col-lg-5 font-weight-normal">Teléfono</dt>
                        <dd class="col-lg-7 font-weight-bold">
                            {{ familiar|attr:ciudadano_field|attr:'telefono'|default_if_none:"-" }}
                        </dd>
                        <dt class="col-lg-5 font-weight-normal">Relación</dt>
                        <dd class="col-lg-7 font-weight-bold">
                            {% if familiar.estado_relacion == "Buena" %}
                                <span class="badge bg-success">{{ familiar.estado_relacion }}</span>
                            {% elif familiar.estado_relacion == "Mala" %}
                                <span class="badge bg-danger">{{ familiar.estado_relacion }}</span>
                            {% elif familiar.estado_relacion == "Indiferente" %}
                                <span class="badge bg-warning">{{ familiar.estado_relacion }}</span>
                            {% else %}
                                <span class="badge bg-white">{{ familiar.estado_relacion }}</span>
                            {% endif %}
                        </dd>
                        <dt class="col-lg-5 font-weight-normal">Conviven</dt>
                        <dd class="col-lg-7 font-weight-bold">
                            {% if familiar.conviven == "True" or familiar.conviven == True %}
                                SI
                            {% else %}
                                NO
                            {% endif %}
                        </dd>
                        <dt class="col-lg-5 font-weight-normal">Cuidador Principal</dt>
                        <dd class="col-lg-7 font-weight-bold">
                            {% if familiar.cuidador_principal == "True" or familiar.cuidador_principal == True %}
                                SI
                            {% else %}
                                NO
                            {% endif %}
                        </dd>
                    </dl>
                </div>
                <div class="col-5 text-center">
                    {% with ciudadano_obj=familiar|attr:ciudadano_field %}
                        {% if ciudadano_obj.foto %}
                            <img src="{{ ciudadano_obj.foto.url }}"
                                 alt="Foto del ciudadano"
                                 class="img-circle img-fluid justify-content-center" />
                        {% else %}
                            <img src="{% static 'custom/img/default.png' %}"
                                 alt="Foto no disponible"
                                 class="img-circle img-fluid justify-content-center" />
                        {% endif %}
                    {% endwith %}
                </div>
            </div>
        </div>
        <div class="card-footer">
            <div class="text-right">
                <a href="{% url 'ciudadanos_ver' familiar|attr:ciudadano_id_field %}"
                   class="btn btn-sm btn-primary d-print-none">Ver ciudadano</a>
            </div>
        </div>
    </div>
</div>
