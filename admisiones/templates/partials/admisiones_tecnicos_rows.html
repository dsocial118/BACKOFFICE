{% load static custom_filters %}
{% for comedor in comedores %}
    <tr>
        <td>
            <a href="{% url 'comedor_detalle' comedor.id %}"
               class="font-weight-bold link-handler"
               title="Ver detalles">{{ comedor.nombre }}</a>
        </td>
        <td>{{ comedor.tipocomedor }}</td>
        <td>{{ comedor.provincia | default_if_none:"Sin información" }}</td>
        <td>
            {{ comedor.calle | default_if_none:"Sin información" }} {{ comedor.numero | default_if_none:"Sin información" }}
        </td>
        <td>
            {{ comedor.referente.nombre| default_if_none:"Sin información" }}, {{ comedor.referente.apellido | default_if_none:"Sin información" }}
        </td>
        <td>{{ comedor.referente.celular | default_if_none:"Sin información" }}</td>
        <td>
            <div class="btn-group" role="group">
                {% if comedor.admision_id %}
                    <a href="{% url 'admisiones_tecnicos_editar' comedor.admision_id %}"
                       class="btn btn-warning btn-sm">
                        {% if request.user|has_group:"Tecnico Comedor" %}Editar{% endif %}
                        {% if request.user|has_group:"Abogado Dupla" %}Ver{% endif %}
                        {% if comedor.estado_legales == "A Rectificar" %}
                            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">Rectificar</span>
                        {% endif %}
                    </a>
                {% else %}
                    {% if request.user|has_group:"Tecnico Comedor" %}
                        <a href="{% url 'admisiones_tecnicos_crear' comedor.id %}"
                           class="btn btn-primary btn-sm">Crear</a>
                    {% endif %}
                {% endif %}
            </div>
        </td>
    </tr>
{% empty %}
    <tr>
        <td colspan="7" class="text-center">No hay admisiones registradas.</td>
    </tr>
{% endfor %}
